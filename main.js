!function(){"use strict";var e=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}resetValidation(){this._toggleButtonState(),this._inputEls.forEach((e=>{this._hideInputError(e)}))}_toggleButtonState(){return this._hasInvalidInput(this._inputEls)?this._disableButton():this._enableButton()}_hasInvalidInput(e){return!e.every((e=>e.validity.valid))}_setEventListeners(){this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}},t=class{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleImageClick=s}_getCardElement(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._likeButton=this._element.querySelector(".card__like-button"),this._deleteCard=this._element.querySelector(".card__trash-button"),this._cardImage=this._element.querySelector(".card__image"),this._likeButton.addEventListener("click",(()=>{this._handleLikeIcon()})),this._deleteCard.addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}_handleLikeIcon(){this._likeButton.classList.toggle("card__like-button_active")}_handleDeleteCard(){this._element.remove(),this._element=null}getView(){return this._element=this._getCardElement(),this._setEventListeners(),this._element.querySelector(".card__title").textContent=this._name,this._cardImage.alt=this._name,this._cardImage.src=this._link,this._element}},s=class{constructor(e){this._popupElement=document.querySelector(e),this._handleEscEvent=this._handleEscEvent.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscEvent)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscEvent)}_handleEscEvent(e){e.preventDefault(),"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close"))&&this.close()}))}},n=class extends s{constructor(e,t){super(e),this._submitHandler=t,this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=this._popupForm.querySelectorAll(".modal__form-input")}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}close(){this._popupForm.reset(),super.close()}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._submitHandler(this._getInputValues())})),super.setEventListeners()}};const r="cards__list",i="#card-template",o=(document.querySelector("#card-template").content.firstElementChild,document.forms["edit-profile-form"],document.querySelector("#profile-edit-button")),a=(document.querySelector("#profile-edit-modal").querySelector(".modal__close"),document.querySelector(".profile__heading"),document.querySelector(".profile__description"),document.querySelector("#profile-heading-input"),document.querySelector("#profile-description-input"),document.forms["add-card-form"]),l=document.querySelector("#card-add-button"),c=(document.querySelector("#card-add-modal").querySelector(".modal__close"),document.querySelector(".cards__list"),document.querySelector("#preview-image-modal"),document.querySelector(".modal__preview-image"),document.querySelector(".modal__image-title"),document.querySelector(".modal__close_type_preview"),{});var u;u={formSelector:".modal__form",inputSelector:".modal__form-input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"},Array.from(document.querySelectorAll(u.formSelector)).forEach((t=>{const s=new e(u,t),n=t.getAttribute("name");c[n]=s,s.enableValidation()}));const d=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(e){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{const t=E(e);return d.addItem(t),t}},`.${r}`),m=new class{constructor(e){let{nameSelector:t,aboutSelector:s}=e;this._nameElement=document.querySelector(t),this._aboutElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent,about:this._aboutElement.textContent}}setUserInfo(e){this._nameElement.textContent=e.name,this._aboutElement.textContent=e.about}}({nameSelector:".profile__heading",aboutSelector:".profile__description"}),_=new n("#profile-edit-modal",(function(e){m.setUserInfo(e),_.close()})),h=new n("#card-add-modal",(function(e){const t=E(e);d.addItem(t),h.close()})),p=new class extends s{constructor(e){super(e),this._image=this._popupElement.querySelector(".modal__preview-image"),this._imageText=this._popupElement.querySelector(".modal__image-title")}open(e){this._imageText.textContent=e.name,this._image.alt=e.name,this._image.src=e.link,super.open()}}("#preview-image-modal");function E(e){return new t(e,i,v).getView()}function v(e){p.open(e)}d.renderItems(),_.setEventListeners(),h.setEventListeners(),p.setEventListeners(),o.addEventListener("click",(()=>{_.open(),function(){const e=m.getUserInfo();_.setInputValues(e)}()})),l.addEventListener("click",(()=>{c[a.getAttribute("name")].resetValidation(),h.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBdUZBLE1BbkZBLE1BQ0VBLFdBQUFBLENBQVlDLEVBQVFDLEdBQ2xCQyxLQUFLQyxlQUFpQkgsRUFBT0ksY0FDN0JGLEtBQUtHLHNCQUF3QkwsRUFBT00scUJBQ3BDSixLQUFLSyxxQkFBdUJQLEVBQU9RLG9CQUNuQ04sS0FBS08saUJBQW1CVCxFQUFPVSxnQkFDL0JSLEtBQUtTLFlBQWNYLEVBQU9ZLFdBRTFCVixLQUFLVyxNQUFRWixDQUNmLENBRUFhLGVBQUFBLENBQWdCQyxHQUNkLE1BQU1DLEVBQWlCZCxLQUFLVyxNQUFNSSxjQUFlLElBQUdGLEVBQVFHLFlBQzVESCxFQUFRSSxVQUFVQyxJQUFJbEIsS0FBS08sa0JBQzNCTyxFQUFlSyxZQUFjTixFQUFRTyxrQkFDckNOLEVBQWVHLFVBQVVDLElBQUlsQixLQUFLUyxZQUNwQyxDQUVBWSxlQUFBQSxDQUFnQlIsR0FDZCxNQUFNQyxFQUFpQmQsS0FBS1csTUFBTUksY0FBZSxJQUFHRixFQUFRRyxZQUM1REgsRUFBUUksVUFBVUssT0FBT3RCLEtBQUtPLGtCQUM5Qk8sRUFBZUssWUFBYyxHQUM3QkwsRUFBZUcsVUFBVUssT0FBT3RCLEtBQUtTLFlBQ3ZDLENBRUFjLG1CQUFBQSxDQUFvQlYsR0FDbEIsSUFBS0EsRUFBUVcsU0FBU0MsTUFDcEIsT0FBT3pCLEtBQUtZLGdCQUFnQkMsR0FFOUJiLEtBQUtxQixnQkFBZ0JSLEVBQ3ZCLENBRUFhLGNBQUFBLEdBQ0UxQixLQUFLMkIsY0FBY1YsVUFBVUMsSUFBSWxCLEtBQUtLLHNCQUN0Q0wsS0FBSzJCLGNBQWNDLFVBQVcsQ0FDaEMsQ0FFQUMsYUFBQUEsR0FDRTdCLEtBQUsyQixjQUFjVixVQUFVSyxPQUFPdEIsS0FBS0ssc0JBQ3pDTCxLQUFLMkIsY0FBY0MsVUFBVyxDQUNoQyxDQUVBRSxlQUFBQSxHQUNFOUIsS0FBSytCLHFCQUVML0IsS0FBS2dDLFVBQVVDLFNBQVNwQixJQUN0QmIsS0FBS3FCLGdCQUFnQlIsRUFBUSxHQUVqQyxDQUVBa0Isa0JBQUFBLEdBQ0UsT0FBSS9CLEtBQUtrQyxpQkFBaUJsQyxLQUFLZ0MsV0FDdEJoQyxLQUFLMEIsaUJBRVAxQixLQUFLNkIsZUFDZCxDQUVBSyxnQkFBQUEsQ0FBaUJDLEdBQ2YsT0FBUUEsRUFBVUMsT0FBT3ZCLEdBQVlBLEVBQVFXLFNBQVNDLE9BQ3hELENBRUFZLGtCQUFBQSxHQUNFckMsS0FBS2dDLFVBQVksSUFBSWhDLEtBQUtXLE1BQU0yQixpQkFBaUJ0QyxLQUFLQyxpQkFDdERELEtBQUsyQixjQUFnQjNCLEtBQUtXLE1BQU1JLGNBQWNmLEtBQUtHLHVCQUNuREgsS0FBS2dDLFVBQVVDLFNBQVNwQixJQUN0QkEsRUFBUTBCLGlCQUFpQixTQUFVQyxJQUNqQ3hDLEtBQUt1QixvQkFBb0JWLEdBQ3pCYixLQUFLK0Isb0JBQW9CLEdBQ3pCLEdBRU4sQ0FFQVUsZ0JBQUFBLEdBQ0V6QyxLQUFLVyxNQUFNNEIsaUJBQWlCLFVBQVdDLElBQ3JDQSxFQUFFRSxnQkFBZ0IsSUFHcEIxQyxLQUFLcUMsb0JBQ1AsR0N4QkYsRUF0REEsTUFDRXhDLFdBQUFBLENBQVk4QyxFQUFNQyxFQUFjQyxHQUM5QjdDLEtBQUs4QyxNQUFRSCxFQUFLSSxLQUNsQi9DLEtBQUtnRCxNQUFRTCxFQUFLTSxLQUNsQmpELEtBQUtrRCxjQUFnQk4sRUFDckI1QyxLQUFLbUQsa0JBQW9CTixDQUMzQixDQUVBTyxlQUFBQSxHQU1FLE9BTG9CQyxTQUNqQnRDLGNBQWNmLEtBQUtrRCxlQUNuQkksUUFBUXZDLGNBQWMsU0FDdEJ3QyxXQUFVLEVBR2YsQ0FFQWxCLGtCQUFBQSxHQUNFckMsS0FBS3dELFlBQWN4RCxLQUFLeUQsU0FBUzFDLGNBQWMsc0JBQy9DZixLQUFLMEQsWUFBYzFELEtBQUt5RCxTQUFTMUMsY0FBYyx1QkFDL0NmLEtBQUsyRCxXQUFhM0QsS0FBS3lELFNBQVMxQyxjQUFjLGdCQUM5Q2YsS0FBS3dELFlBQVlqQixpQkFBaUIsU0FBUyxLQUN6Q3ZDLEtBQUs0RCxpQkFBaUIsSUFFeEI1RCxLQUFLMEQsWUFBWW5CLGlCQUFpQixTQUFTLEtBQ3pDdkMsS0FBSzZELG1CQUFtQixJQUUxQjdELEtBQUsyRCxXQUFXcEIsaUJBQWlCLFNBQVMsS0FDeEN2QyxLQUFLbUQsa0JBQWtCLENBQUVKLEtBQU0vQyxLQUFLOEMsTUFBT0csS0FBTWpELEtBQUtnRCxPQUFRLEdBRWxFLENBRUFZLGVBQUFBLEdBQ0U1RCxLQUFLd0QsWUFBWXZDLFVBQVU2QyxPQUFPLDJCQUNwQyxDQUVBRCxpQkFBQUEsR0FDRTdELEtBQUt5RCxTQUFTbkMsU0FDZHRCLEtBQUt5RCxTQUFXLElBQ2xCLENBRUFNLE9BQUFBLEdBT0UsT0FOQS9ELEtBQUt5RCxTQUFXekQsS0FBS29ELGtCQUNyQnBELEtBQUtxQyxxQkFDTHJDLEtBQUt5RCxTQUFTMUMsY0FBYyxnQkFBZ0JJLFlBQWNuQixLQUFLOEMsTUFDL0Q5QyxLQUFLMkQsV0FBV0ssSUFBTWhFLEtBQUs4QyxNQUMzQjlDLEtBQUsyRCxXQUFXTSxJQUFNakUsS0FBS2dELE1BRXBCaEQsS0FBS3lELFFBQ2QsR0NaRixFQXJDQSxNQUNFNUQsV0FBQUEsQ0FBWXFFLEdBQ1ZsRSxLQUFLbUUsY0FBZ0JkLFNBQVN0QyxjQUFjbUQsR0FDNUNsRSxLQUFLb0UsZ0JBQWtCcEUsS0FBS29FLGdCQUFnQkMsS0FBS3JFLEtBQ25ELENBRUFzRSxJQUFBQSxHQUNFdEUsS0FBS21FLGNBQWNsRCxVQUFVQyxJQUFJLGdCQUNqQ21DLFNBQVNkLGlCQUFpQixRQUFTdkMsS0FBS29FLGdCQUMxQyxDQUVBRyxLQUFBQSxHQUNFdkUsS0FBS21FLGNBQWNsRCxVQUFVSyxPQUFPLGdCQUNwQytCLFNBQVNtQixvQkFBb0IsUUFBU3hFLEtBQUtvRSxnQkFDN0MsQ0FFQUEsZUFBQUEsQ0FBZ0I1QixHQUNkQSxFQUFFRSxpQkFDWSxXQUFWRixFQUFFaUMsS0FDSnpFLEtBQUt1RSxPQUVULENBRUFHLGlCQUFBQSxHQUNFMUUsS0FBS21FLGNBQWM1QixpQkFBaUIsU0FBVUMsS0FFMUNBLEVBQUVtQyxPQUFPMUQsVUFBVTJELFNBQVMsVUFDNUJwQyxFQUFFbUMsT0FBTzFELFVBQVUyRCxTQUFTLGtCQUU1QjVFLEtBQUt1RSxPQUNQLEdBRUosR0NRRixFQXRDQSxjQUE0Qk0sRUFDMUJoRixXQUFBQSxDQUFZcUUsRUFBZVksR0FDekJDLE1BQU1iLEdBQ05sRSxLQUFLZ0YsZUFBaUJGLEVBQ3RCOUUsS0FBS2lGLFdBQWFqRixLQUFLbUUsY0FBY3BELGNBQWMsZ0JBQ25EZixLQUFLa0YsV0FBYWxGLEtBQUtpRixXQUFXM0MsaUJBQWlCLHFCQUNyRCxDQUVBNkMsZUFBQUEsR0FDRSxNQUFNQyxFQUFjLENBQUMsRUFJckIsT0FIQXBGLEtBQUtrRixXQUFXakQsU0FBU29ELElBQ3ZCRCxFQUFZQyxFQUFNdEMsTUFBUXNDLEVBQU1DLEtBQUssSUFFaENGLENBQ1QsQ0FFQUcsY0FBQUEsQ0FBZTVDLEdBQ2IzQyxLQUFLa0YsV0FBV2pELFNBQVNvRCxJQUN2QkEsRUFBTUMsTUFBUTNDLEVBQUswQyxFQUFNdEMsS0FBSyxHQUVsQyxDQUVBd0IsS0FBQUEsR0FDRXZFLEtBQUtpRixXQUFXTyxRQUNoQlQsTUFBTVIsT0FDUixDQUVBRyxpQkFBQUEsR0FDRTFFLEtBQUtpRixXQUFXMUMsaUJBQWlCLFVBQVdDLElBQzFDQSxFQUFFRSxpQkFDRjFDLEtBQUtnRixlQUFlaEYsS0FBS21GLGtCQUFrQixJQUU3Q0osTUFBTUwsbUJBQ1IsR0NqQ0YsTUFBTWUsRUFDUyxjQURUQSxFQUVVLGlCQzRCVkMsR0RkSnJDLFNBQVN0QyxjQUFjLGtCQUFrQnVDLFFBQVFxQyxrQkNhM0J0QyxTQUFTdUMsTUFBTSxxQkFDYnZDLFNBQVN0QyxjQUFjLHlCQVkzQzhFLEdBWG1CeEMsU0FBU3RDLGNBQWMsdUJBQ0RBLGNBQWMsaUJBQ3RDc0MsU0FBU3RDLGNBQWMscUJBQ25Cc0MsU0FBU3RDLGNBQWMseUJBQ3RCc0MsU0FBU3RDLGNBQWMsMEJBQ25Cc0MsU0FBU3RDLGNBQ3ZDLDhCQUtrQnNDLFNBQVN1QyxNQUFNLGtCQUM3QkUsRUFBZ0J6QyxTQUFTdEMsY0FBYyxvQkNuQnZDZ0YsR0RvQmUxQyxTQUFTdEMsY0FBYyxtQkFDTEEsY0FBYyxpQkFDbENzQyxTQUFTdEMsY0FBYyxnQkFLaEJzQyxTQUFTdEMsY0FBYyx3QkFDckJzQyxTQUFTdEMsY0FBYyx5QkFDdkJzQyxTQUFTdEMsY0FBYyx1QkFDcEJzQyxTQUFTdEMsY0FDdEMsOEJDL0JxQixDQUFDLEdBRUVqQixRRnBCWCxDQUNia0csYUFBYyxlQUNkOUYsY0FBZSxxQkFDZkUscUJBQXNCLGlCQUN0QkUsb0JBQXFCLHlCQUNyQkUsZ0JBQWlCLDBCQUNqQkUsV0FBWSxnQkVlS3VGLE1BQU1DLEtBQUs3QyxTQUFTZixpQkFBaUJ4QyxFQUFPa0csZUFDcEQvRCxTQUFTa0UsSUFDaEIsTUFBTUMsRUFBWSxJQUFJQyxFQUFjdkcsRUFBUXFHLEdBQ3RDRyxFQUFXSCxFQUFPSSxhQUFhLFFBQ3JDUixFQUFlTyxHQUFZRixFQUMzQkEsRUFBVTNELGtCQUFrQixJQVFoQyxNQUFNK0QsRUFBYyxJQzFDcEIsTUFDRTNHLFdBQUFBLENBQVc0RyxFQUFzQkMsR0FBVSxJQUEvQixNQUFFQyxFQUFLLFNBQUVDLEdBQVVILEVBQzdCekcsS0FBSzZHLE9BQVNGLEVBQ2QzRyxLQUFLOEcsVUFBWUYsRUFDakI1RyxLQUFLK0csV0FBYTFELFNBQVN0QyxjQUFjMkYsRUFDM0MsQ0FFQU0sV0FBQUEsQ0FBWUMsR0FDVmpILEtBQUs2RyxPQUFPNUUsU0FBU2dGLElBQ25CakgsS0FBSzhHLFVBQVVHLEVBQUssR0FFeEIsQ0FFQUMsT0FBQUEsQ0FBUUQsR0FDTmpILEtBQUsrRyxXQUFXSSxRQUFRRixFQUMxQixHRDRCQSxDQUNFTixNRDFDaUIsQ0FDbkIsQ0FDRTVELEtBQU0sa0JBQ05FLEtBQU0sc0dBRVIsQ0FDRUYsS0FBTSxjQUNORSxLQUFNLHlHQUVSLENBQ0VGLEtBQU0saUJBQ05FLEtBQU0sNEdBRVIsQ0FDRUYsS0FBTSxVQUNORSxLQUFNLHFHQUVSLENBQ0VGLEtBQU0sd0JBQ05FLEtBQU0scUdBRVIsQ0FDRUYsS0FBTSxpQkFDTkUsS0FBTSxtR0NvQk4yRCxTQUFXakUsSUFDVCxNQUFNeUUsRUFBY0MsRUFBVzFFLEdBRS9CLE9BREE2RCxFQUFZVSxRQUFRRSxHQUNiQSxDQUFXLEdBR3JCLElBQUczQixLQUtBNkIsRUFBVyxJRXhEakIsTUFDRXpILFdBQUFBLENBQVc0RyxHQUFrQyxJQUFqQyxhQUFFYyxFQUFZLGNBQUVDLEdBQWVmLEVBQ3pDekcsS0FBS3lILGFBQWVwRSxTQUFTdEMsY0FBY3dHLEdBQzNDdkgsS0FBSzBILGNBQWdCckUsU0FBU3RDLGNBQWN5RyxFQUM5QyxDQUVBRyxXQUFBQSxHQUNFLE1BQU8sQ0FDTDVFLEtBQU0vQyxLQUFLeUgsYUFBYXRHLFlBQ3hCeUcsTUFBTzVILEtBQUswSCxjQUFjdkcsWUFFOUIsQ0FFQTBHLFdBQUFBLENBQVlsRixHQUNWM0MsS0FBS3lILGFBQWF0RyxZQUFjd0IsRUFBS0ksS0FDckMvQyxLQUFLMEgsY0FBY3ZHLFlBQWN3QixFQUFLaUYsS0FDeEMsR0Z3QzRCLENBQzVCTCxhQUFjLG9CQUNkQyxjQUFlLDBCQUtYTSxFQUFtQixJQUFJQyxFQUMzQix1QkEwREYsU0FBaUNwRixHQUMvQjJFLEVBQVNPLFlBQVlsRixHQUNyQm1GLEVBQWlCdkQsT0FDbkIsSUF2RE15RCxFQUFlLElBQUlELEVBQWMsbUJBNEN2QyxTQUE2QnBGLEdBQzNCLE1BQU15RSxFQUFjQyxFQUFXMUUsR0FDL0I2RCxFQUFZVSxRQUFRRSxHQUNwQlksRUFBYXpELE9BQ2YsSUE1Q00wRCxFQUFhLElHeEVuQixjQUE2QnBELEVBQzNCaEYsV0FBQUEsQ0FBWXFFLEdBQ1ZhLE1BQU1iLEdBQ05sRSxLQUFLa0ksT0FBU2xJLEtBQUttRSxjQUFjcEQsY0FBYyx5QkFDL0NmLEtBQUttSSxXQUFhbkksS0FBS21FLGNBQWNwRCxjQUFjLHNCQUNyRCxDQUVBdUQsSUFBQUEsQ0FBSzNCLEdBQ0gzQyxLQUFLbUksV0FBV2hILFlBQWN3QixFQUFLSSxLQUNuQy9DLEtBQUtrSSxPQUFPbEUsSUFBTXJCLEVBQUtJLEtBQ3ZCL0MsS0FBS2tJLE9BQU9qRSxJQUFNdEIsRUFBS00sS0FDdkI4QixNQUFNVCxNQUNSLEdINERvQyx3QkErQnRDLFNBQVMrQyxFQUFXMUUsR0FFbEIsT0FEb0IsSUFBSXlGLEVBQUt6RixFQUFNOEMsRUFBd0I1QyxHQUN4Q2tCLFNBQ3JCLENBcUJBLFNBQVNsQixFQUFpQkYsR0FDeEJzRixFQUFXM0QsS0FBSzNCLEVBQ2xCLENBbkRBNkQsRUFBWVEsY0FJWmMsRUFBaUJwRCxvQkFJakJzRCxFQUFhdEQsb0JBSWJ1RCxFQUFXdkQsb0JBNkNYZ0IsRUFBa0JuRCxpQkFBaUIsU0FBUyxLQUMxQ3VGLEVBQWlCeEQsT0F4Q25CLFdBQ0UsTUFBTStELEVBQWNmLEVBQVNLLGNBQzdCRyxFQUFpQnZDLGVBQWU4QyxFQUNsQyxDQXNDRUMsRUFBaUIsSUFLbkJ4QyxFQUFjdkQsaUJBQWlCLFNBQVMsS0FDdEN3RCxFQUFlRixFQUFZVSxhQUFhLFNBQVN6RSxrQkFDakRrRyxFQUFhMUQsTUFBTSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL3V0aWxzL3V0aWxzLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEltcG9ydHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBDbGFzcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xuXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgICB9XG4gICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XG4gIH1cblxuICBfZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgX2VuYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfSk7XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dEVscykpIHtcbiAgICAgIHJldHVybiB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9lbmFibGVCdXR0b24oKTtcbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XG4gICAgcmV0dXJuICFpbnB1dExpc3QuZXZlcnkoKGlucHV0RWwpID0+IGlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0RWxzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBFeHBvcnRzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCIvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gSW1wb3J0cyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIENsYXNzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgfVxuXG4gIF9nZXRDYXJkRWxlbWVudCgpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9kZWxldGVDYXJkID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RyYXNoLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUljb24oKTtcbiAgICB9KTtcbiAgICB0aGlzLl9kZWxldGVDYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlSWNvbigpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH1cblxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0Q2FyZEVsZW1lbnQoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxufVxuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gRXhwb3J0cyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xuIiwiLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEltcG9ydHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBDbGFzcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NFdmVudCA9IHRoaXMuX2hhbmRsZUVzY0V2ZW50LmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NFdmVudCk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjRXZlbnQpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0V2ZW50KGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSB8fFxuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIilcbiAgICAgICkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEV4cG9ydHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XG4iLCIvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gSW1wb3J0cyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBDbGFzcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwgc3VibWl0SGFuZGxlcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIgPSBzdWJtaXRIYW5kbGVyO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19mb3JtLWlucHV0XCIpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dFZhbHVlcztcbiAgfVxuXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcbiAgICB9KTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fc3VibWl0SGFuZGxlcih0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBFeHBvcnRzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07XG4iLCIvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gSW1wb3J0cyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBFbGVtZW50cyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vLyBET00gRWxlbWVudHNcblxuY29uc3Qgc2VsZWN0b3JzID0ge1xuICBjYXJkU2VjdGlvbjogXCJjYXJkc19fbGlzdFwiLFxuICBjYXJkVGVtcGxhdGU6IFwiI2NhcmQtdGVtcGxhdGVcIixcbiAgcHJldmlld01vZGFsOiBcIiNwcmV2aWV3LWltYWdlLW1vZGFsXCIsXG59O1xuXG5jb25zdCBjb25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2Zvcm0taW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvclwiLFxufTtcblxuY29uc3QgY2FyZFRlbXBsYXRlID1cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBFeHBvcnRzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmV4cG9ydCB7XG4gIC8vIERPTSBFbGVtZW50c1xuICBzZWxlY3RvcnMsXG4gIGNvbmZpZyxcbiAgY2FyZFRlbXBsYXRlLFxufTtcbiIsIi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBJbXBvcnRzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEVsZW1lbnRzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8vIENhcmRzXG5cbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuXG4vLyBQcm9maWxlIEVsZW1lbnRzXG5cbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiZWRpdC1wcm9maWxlLWZvcm1cIl07XG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcbmNvbnN0IGNsb3NlUHJvZmlsZUVkaXRNb2RhbCA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG5jb25zdCBwcm9maWxlSGVhZGluZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faGVhZGluZ1wiKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5jb25zdCBwcm9maWxlSGVhZGluZ0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWhlYWRpbmctaW5wdXRcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxuKTtcblxuLy8gQ2FyZCBFbGVtZW50c1xuXG5jb25zdCBjYXJkQWRkRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiYWRkLWNhcmQtZm9ybVwiXTtcbmNvbnN0IGNhcmRBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtYWRkLWJ1dHRvblwiKTtcbmNvbnN0IGNhcmRBZGRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1hZGQtbW9kYWxcIik7XG5jb25zdCBjbG9zZUNhcmRBZGRNb2RhbCA9IGNhcmRBZGRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcbmNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuY29uc3QgY2FyZFNlbGVjdG9yID0gXCIjY2FyZC10ZW1wbGF0ZVwiO1xuXG4vLyBQcmV2aWV3IEltYWdlIEVsZW1lbnRzXG5cbmNvbnN0IHByZXZpZXdJbWFnZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LWltYWdlLW1vZGFsXCIpO1xuY29uc3QgcHJldmlld0ltYWdlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3ByZXZpZXctaW1hZ2VcIik7XG5jb25zdCBwcmV2aWV3VGl0bGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtdGl0bGVcIik7XG5jb25zdCBjbG9zZVByZXZpZXdJbWFnZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIubW9kYWxfX2Nsb3NlX3R5cGVfcHJldmlld1wiXG4pO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gRXhwb3J0cyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5leHBvcnQge1xuICAvLyBDYXJkc1xuICBpbml0aWFsQ2FyZHMsXG5cbiAgLy8gUHJvZmlsZSBFbGVtZW50c1xuICBwcm9maWxlRWRpdEZvcm0sXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxuICBwcm9maWxlRWRpdE1vZGFsLFxuICBjbG9zZVByb2ZpbGVFZGl0TW9kYWwsXG4gIHByb2ZpbGVIZWFkaW5nLFxuICBwcm9maWxlRGVzY3JpcHRpb24sXG4gIHByb2ZpbGVIZWFkaW5nSW5wdXQsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxuXG4gIC8vIENhcmQgRWxlbWVudHNcbiAgY2FyZEFkZEZvcm0sXG4gIGNhcmRBZGRCdXR0b24sXG4gIGNhcmRBZGRNb2RhbCxcbiAgY2xvc2VDYXJkQWRkTW9kYWwsXG4gIGNhcmRMaXN0RWwsXG4gIGNhcmRTZWxlY3RvcixcblxuICAvLyBQcmV2aWV3IEltYWdlIEVsZW1lbnRzXG4gIHByZXZpZXdJbWFnZU1vZGFsLFxuICBwcmV2aWV3SW1hZ2VFbGVtZW50LFxuICBwcmV2aWV3VGl0bGVFbGVtZW50LFxuICBjbG9zZVByZXZpZXdJbWFnZU1vZGFsLFxufTtcbiIsIi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBJbXBvcnRzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8vIENvbXBvbmVudHNcblxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcblxuLy8gVXRpbGl0aWVzIGFuZCBjb25zdGFudHNcblxuaW1wb3J0IHsgc2VsZWN0b3JzLCBjb25maWcgfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcblxuaW1wb3J0IHtcbiAgaW5pdGlhbENhcmRzLFxuICBjYXJkQWRkRm9ybSxcbiAgcHJvZmlsZUVkaXRCdXR0b24sXG4gIGNhcmRBZGRCdXR0b24sXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuLy8gU3R5bGVzXG5cbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEluc3RhbmNlcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8vIEZvcm0gVmFsaWRhdG9yIEluaXRpYWxpemF0aW9uXG5cbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XG5cbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsKSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWwpO1xuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsLmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4gIH0pO1xufTtcblxuZW5hYmxlVmFsaWRhdGlvbihjb25maWcpO1xuXG4vLyBTZWN0aW9uIEluaXRpYWxpemF0aW9uXG5cbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGRhdGEpO1xuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gICAgfSxcbiAgfSxcbiAgYC4ke3NlbGVjdG9ycy5jYXJkU2VjdGlvbn1gXG4pO1xuXG4vLyBVc2VyIEluZm8gSW5pdGlhbGl6YXRpb25cblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2hlYWRpbmdcIixcbiAgYWJvdXRTZWxlY3RvcjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcbn0pO1xuXG4vLyBFZGl0IFByb2ZpbGUgUG9wdXAgSW5pdGlhbGl6YXRpb25cblxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcbiAgaGFuZGxlRWRpdFByb2ZpbGVTdWJtaXRcbik7XG5cbi8vIEFkZCBDYXJkIFBvcHVwIEluaXRpYWxpemF0aW9uXG5cbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2NhcmQtYWRkLW1vZGFsXCIsIGhhbmRsZUNhcmRBZGRTdWJtaXQpO1xuXG4vLyBJbWFnZSBQb3B1cCBJbml0aWFsaXphdGlvblxuXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3ByZXZpZXctaW1hZ2UtbW9kYWxcIik7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBNZXRob2QgQ2FsbHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8vIFNlY3Rpb24gSW52b2NhdGlvblxuXG5jYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuXG4vLyBFZGl0IFByb2ZpbGUgUG9wdXAgSW52b2NhdGlvblxuXG5lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIEFkZCBDYXJkIFBvcHVwIEludm9jYXRpb25cblxuYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIEltYWdlIFBvcHVwIEludm9jYXRpb25cblxuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBGdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vLyBFZGl0IFByb2ZpbGUgRnVuY3Rpb25zXG5cbmZ1bmN0aW9uIGZpbGxQcm9maWxlRm9ybSgpIHtcbiAgY29uc3QgcHJvZmlsZUluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBlZGl0UHJvZmlsZVBvcHVwLnNldElucHV0VmFsdWVzKHByb2ZpbGVJbmZvKTtcbn1cblxuLy8gQ3JlYXRlIENhcmQgRnVuY3Rpb25zXG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YSkge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IG5ldyBDYXJkKGRhdGEsIHNlbGVjdG9ycy5jYXJkVGVtcGxhdGUsIGhhbmRsZUltYWdlQ2xpY2spO1xuICByZXR1cm4gY2FyZEVsZW1lbnQuZ2V0VmlldygpO1xufVxuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBFdmVudCBIYW5kbGVycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vLyBBZGQgQ2FyZCBIYW5kbGVyc1xuXG5mdW5jdGlvbiBoYW5kbGVDYXJkQWRkU3VibWl0KGRhdGEpIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGRhdGEpO1xuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XG59XG5cbi8vIEVkaXQgUHJvZmlsZSBIYW5kbGVyc1xuXG5mdW5jdGlvbiBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdChkYXRhKSB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICBlZGl0UHJvZmlsZVBvcHVwLmNsb3NlKCk7XG59XG5cbi8vIEltYWdlIENsaWNrIEhhbmRsZXJzXG5cbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soZGF0YSkge1xuICBpbWFnZVBvcHVwLm9wZW4oZGF0YSk7XG59XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEV2ZW50IExpc3RlbmVycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8vIEVkaXQgUHJvZmlsZSBMaXN0ZW5lcnNcblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZWRpdFByb2ZpbGVQb3B1cC5vcGVuKCk7XG4gIGZpbGxQcm9maWxlRm9ybSgpO1xufSk7XG5cbi8vIEFkZCBDYXJkIExpc3RlbmVyc1xuXG5jYXJkQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGZvcm1WYWxpZGF0b3JzW2NhcmRBZGRGb3JtLmdldEF0dHJpYnV0ZShcIm5hbWVcIildLnJlc2V0VmFsaWRhdGlvbigpO1xuICBhZGRDYXJkUG9wdXAub3BlbigpO1xufSk7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBFeHBvcnRzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmV4cG9ydCB7XG4gIC8vIEZvcm0gVmFsaWRhdG9yIEluaXRpYWxpemF0aW9uXG4gIGZvcm1WYWxpZGF0b3JzLFxuICBlbmFibGVWYWxpZGF0aW9uLFxufTtcbiIsIi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBJbXBvcnRzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gQ2xhc3MgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBzZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKGl0ZW0pIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oaXRlbSkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW0pO1xuICB9XG59XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBFeHBvcnRzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247XG4iLCIvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gSW1wb3J0cyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIENsYXNzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBhYm91dFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9hYm91dEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0U2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IHRoaXMuX2Fib3V0RWxlbWVudC50ZXh0Q29udGVudCxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8oZGF0YSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2Fib3V0RWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEuYWJvdXQ7XG4gIH1cbn1cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEV4cG9ydHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuZXhwb3J0IGRlZmF1bHQgVXNlckluZm87XG4iLCIvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gSW1wb3J0cyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBDbGFzcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19wcmV2aWV3LWltYWdlXCIpO1xuICAgIHRoaXMuX2ltYWdlVGV4dCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS10aXRsZVwiKTtcbiAgfVxuXG4gIG9wZW4oZGF0YSkge1xuICAgIHRoaXMuX2ltYWdlVGV4dC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gRXhwb3J0cyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhJbWFnZTtcbiJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbCIsImVycm9yTWVzc2FnZUVsIiwicXVlcnlTZWxlY3RvciIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsInJlbW92ZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2Rpc2FibGVCdXR0b24iLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfZW5hYmxlQnV0dG9uIiwicmVzZXRWYWxpZGF0aW9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2lucHV0RWxzIiwiZm9yRWFjaCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJpbnB1dExpc3QiLCJldmVyeSIsIl9zZXRFdmVudExpc3RlbmVycyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2dldENhcmRFbGVtZW50IiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2xpa2VCdXR0b24iLCJfZWxlbWVudCIsIl9kZWxldGVDYXJkIiwiX2NhcmRJbWFnZSIsIl9oYW5kbGVMaWtlSWNvbiIsIl9oYW5kbGVEZWxldGVDYXJkIiwidG9nZ2xlIiwiZ2V0VmlldyIsImFsdCIsInNyYyIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0V2ZW50IiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXAiLCJzdWJtaXRIYW5kbGVyIiwic3VwZXIiLCJfc3VibWl0SGFuZGxlciIsIl9wb3B1cEZvcm0iLCJfaW5wdXRMaXN0IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsInNlbGVjdG9ycyIsInByb2ZpbGVFZGl0QnV0dG9uIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJmb3JtcyIsImNhcmRBZGRGb3JtIiwiY2FyZEFkZEJ1dHRvbiIsImZvcm1WYWxpZGF0b3JzIiwiZm9ybVNlbGVjdG9yIiwiQXJyYXkiLCJmcm9tIiwiZm9ybUVsIiwidmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIiwiY2FyZFNlY3Rpb24iLCJfcmVmIiwic2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJwcmVwZW5kIiwiY2FyZEVsZW1lbnQiLCJjcmVhdGVDYXJkIiwidXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJhYm91dFNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2Fib3V0RWxlbWVudCIsImdldFVzZXJJbmZvIiwiYWJvdXQiLCJzZXRVc2VySW5mbyIsImVkaXRQcm9maWxlUG9wdXAiLCJQb3B1cFdpdGhGb3JtIiwiYWRkQ2FyZFBvcHVwIiwiaW1hZ2VQb3B1cCIsIl9pbWFnZSIsIl9pbWFnZVRleHQiLCJDYXJkIiwicHJvZmlsZUluZm8iLCJmaWxsUHJvZmlsZUZvcm0iXSwic291cmNlUm9vdCI6IiJ9